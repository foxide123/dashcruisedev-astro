---
import '../styles/global.css';
import Navbar from '@/components/LayoutComponents/Navbar.astro';
import { ClientRouter } from 'astro:transitions';
import { fade } from 'astro:transitions';
import Metadata from "@/components/seo/Metadata.astro"
import type {Props as MetadataProps} from "@/components/seo/Metadata.astro"
import Footer from '@/components/LayoutComponents/Footer.astro';
import { translations, type SupportedLocale } from '@/utils/translationUtils';

export interface Props {
  metadata: MetadataProps;
}

const {metadata} = Astro.props;
const {locale} = Astro.params;

const supportedLocale = locale as SupportedLocale

const footerData = (await translations[supportedLocale]['footer.json']())['footer'];
console.log("footerData:", footerData);
const newsletterData = (await translations[supportedLocale]['common.json']())['newsletter'];
console.log('newsletterData:', newsletterData);
---

<html lang="en" transition:animate="none">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <Metadata {...metadata} />
    <ClientRouter />
  </head>
  <body>
    <Navbar locale={locale}/>
    <article>
      <slot />
      <!-- your content is injected here -->
    </article>
    <Footer lg_screen_width="lg: w-[85vw]" default_screen_width="w-[75vw]" footerData={footerData} newsletterData={newsletterData} locale={locale}/>
  </body><style>
    h1 {
      font-size: 2rem;
    }
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(50px); /* or X for horizontal */
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    article[astro-transition] {
      animation: slideIn 0.5s ease;
    }
  </style>
</html>
