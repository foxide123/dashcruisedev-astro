---
import { MenuItemsData } from '@/data/MenuItemsData';
import CountrySelectionModal from '../modals/CountrySelectionModal';
import Cookies from 'js-cookie';
import HamburgerToggle from './HamburgerToggle';
import NavbarMenu from './NavbarMenu.astro';

const lg_screen_width = 'lg:w-[75vw]';
const { navbarData } = Astro.props;
const { locale } = Astro.params;

type NavbarItem = {
  name: string;
  pathname: string;
};

const navbarItems: NavbarItem[] = navbarData['navbarItems'];
const cta: string = navbarData['cta'];

const pathname = Astro.url.pathname;
---

<nav
  class={` xl:absolute xl:left-[50%] xl:transform xl:translate-x-[-50%] absolute top-0 z-50 xl:flex-row xl:my-[48px] xl:h-fit lg:rounded-4xl mx-auto h-fit flex-col caret-transparent flex bg-transparent text-white justify-between items-center  ${lg_screen_width} w-screen`}
>
  <div
    class="w-full xl:px-0 xl:pl-6 sm:px-0 justify-center flex items-center"
  >
    {/* > XL Navbar (Only Icon)*/}
    <a
      href="/"
      class=" xl:flex hidden self-center rounded-4xl px-2 h-full justify-center items-center"
    >
      <p
        class="font-semibold text-3xl tracking-[-4%]"
      >
        Dashcruise<span class="text-[#ef7a0e] ml-2"></span>
      </p>
    </a>
    <div class="text-lg font-normal tracking-[-0.5%] flex items-center justify-center gap-8 w-full">
      <NavbarMenu navbarItems={navbarItems} />
    </div>
    <div
      class="2xl:w-[350px] xl:w-[250px] xl:flex justify-end items-center scroll-smooth hidden"
    >
      <a
        href="#pricing_section"
        class=" text-center bg-carrot-500 mr-12 rounded-4xl px-8 py-4 flex justify-center items-center cursor-pointer"
      >
        {cta}
      </a>
    </div>
  </div>

  {/* DEFAULT to XL Navbar (Hamburger, Icon and Locale)*/}
  <div
    class=" backdrop-blur-3xl absolute top-0 left-0 mx-auto xl:hidden w-screen self-center flex flex-col items-center"
  >
    <div class="flex items-center justify-between w-full py-5 px-10">
      {/* Logo */}
      <a href="/">
        <p>Dashcruise<span class="text-[#ef7a0e] ml-2"></span></p>
      </a>
      {/* Hamburger */}
      <HamburgerToggle client:media="(max-width: 1279px)" />
    </div>
    <div class="relative w-screen">
      <ul
        id="menu"
        class={`backdrop-blur-3xl py-5 absolute top-0 w-full caret-transparent xl:flex-row flex flex-col justify-center items-center text-[20px] font-semibold cursor-pointer 
transition-all duration-500 ease-in-out overflow-hidden 
     xl:max-h-none xl:opacity-100 max-h-0 opacity-0`}
      >
      <NavbarMenu navbarItems={navbarItems}/>
      </ul>
      <li class="xl:block hidden">
        <CountrySelectionModal
          client:media="(min-width: 1280px)"
          locale={locale}
        />
      </li>
    </div>
  </div>
</nav>
